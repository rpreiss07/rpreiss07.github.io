import{G as k,H as U,a as f,o as _,c as w,b as o,e as l,t as V,I as E,J as A,u as P,r as a,v as F,K as L,q as y,w as r,T as N,F as O,f as G,g as J,h as Y,s as H,z as K,L as j,A as R,m as W}from"./index-Ce8sYQXE.js";import{_ as q}from"./VisPandasTable-C21DDXSs.js";import"./VisPathSelect-Droyv54l.js";const z={class:"card col-12 p-fluid"},Q={class:"flex align-items-baseline"},X={class:"mr-3"},h={__name:"VisOption",props:k({title:String},{selected:{default:!1},selectedModifiers:{}}),emits:["update:selected"],setup(v){const c=U(v,"selected");return(u,n)=>{const i=f("InputSwitch");return _(),w("div",z,[o("div",Q,[l(i,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=d=>c.value=d),class:"mr-3"},null,8,["modelValue"]),o("h3",X,V(v.title),1),E(u.$slots,"descr",{class:"mr-3"})]),E(u.$slots,"body",{class:"mr-3"})])}}},Z={class:"card"},ee=o("label",{for:"typedecl"},"Type Declaration",-1),te=o("br",null,null,-1),se=o("br",null,null,-1),ae=o("p",null,"Activate and configure the below export options, then submit the view definition.",-1),oe=o("p",null,"Export item data in JSON format?",-1),le=o("p",null,"Export item data in YAML format?",-1),ne=o("p",null,"Export item data in CSV format?",-1),ie="t-00000000-0000-1000-0000-000000000002-view",ue=Object.assign(A,{__name:"ViewCreate",setup(v){const c=P();a({name:"xx",path:"ppxx"}),a({name:"xx",path:"ppyy"});const u=a({str:["Alpha","Beta","Rome","Delta"],int:["Hey","Hi"]}),n=a(!1),i=a(!1),d=a(!1),T=a(!1),S=a(""),b=a(!1),C=a(""),x=a(""),g=a(F("Configure the view below, then submit it.")),m=a([{id:"1000",name:"Column 1",dataPath:"Alpha"},{id:"1001",name:"Column 2",dataPath:"Beta"}]);L(c.params.type_id,u,T,S),y(()=>c.params.type_id,(e,t)=>{console.log("Watch type_id"),H(e)},{immediate:!0}),y(b,async(e,t)=>{t&&(g.value=K(`Failure in submitting view (${C})`))}),y(j,async(e,t)=>{console.log("Watch gsTypeId"),e&&(this.$asyncComputed.gsTypeDecl.update(),this.$asyncComputed.gsTypePaths.update())});function I(){g.value=W(`View ${x.value} created.`)}function $(e){const t=M();R(ie,t,x,b,C,I)}function M(){var e="view = YnyView { frames = [ ";if(console.log("GenerateKclViewItem"),console.log(n),console.log(i),n&&(e+=`
  JsonExport { },`),i&&(e+=`
  YamlExport { },`),d){e+=`
  CSVExport { `,e+=`
    title = 'CSV Export'`,e+=`
    columns = [ `;var t=0;for(const p of m.value)e+=`
      CSVExportColumn { `,e+="name = '"+p.name+"', ",e+="data_path = '"+p.dataPath+"'",e+=" }",t++,t<m.value.length&&(e+=",");e+=`
    ]
  },`}return e+=`
] }`,console.log("KCL item view:"),console.log(e),e}return(e,t)=>{const p=f("Textarea"),B=f("Message"),D=f("Button");return _(),w("div",null,[o("div",Z,[o("h3",null,"Create View for Type "+V(e.$route.params.type_id),1),ee,te,l(p,{id:"typedecl",modelValue:e.gsTypeDecl,"onUpdate:modelValue":t[0]||(t[0]=s=>e.gsTypeDecl=s),rows:"4",disabled:"",class:"mb-2 mr-2 w-full"},null,8,["modelValue"]),se,ae,l(N,{name:"p-message",tag:"div"},{default:r(()=>[(_(!0),w(O,null,G(g.value,s=>(_(),J(B,{severity:s.severity,key:s.content},{default:r(()=>[Y(V(s.content),1)]),_:2},1032,["severity"]))),128))]),_:1}),l(D,{label:"Submit View",onClick:$,class:"mb-2 mr-2"})]),l(h,{title:"JSON Export",selected:n.value,"onUpdate:selected":t[1]||(t[1]=s=>n.value=s)},{descr:r(()=>[oe]),_:1},8,["selected"]),l(h,{title:"YAML Export",selected:i.value,"onUpdate:selected":t[2]||(t[2]=s=>i.value=s)},{descr:r(()=>[le]),_:1},8,["selected"]),l(h,{title:"CSV Export",selected:d.value,"onUpdate:selected":t[4]||(t[4]=s=>d.value=s)},{descr:r(()=>[ne]),body:r(()=>[l(q,{columns:m.value,"onUpdate:columns":t[3]||(t[3]=s=>m.value=s),paths:e.gsTypePaths},null,8,["columns","paths"])]),_:1},8,["selected"])])}}});export{ue as default};
